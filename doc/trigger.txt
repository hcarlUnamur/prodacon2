DELIMITER $$

CREATE TRIGGER triggerInsert  
BEFORE INSERT ON tableSource  
FOR EACH ROW  
BEGIN  
  IF not (new.sourceId IN (SELECT destinationId from tableDestination)) 
THEN  
    SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'cannot insert in tableSource because of missing value in tableDestination';
END IF;
END $$

DELIMITER ;


DELIMITER $$

CREATE TRIGGER triggerDelete 
BEFORE delete ON tableDestination  
FOR EACH ROW  
BEGIN  
  IF (old.destinationId IN (SELECT sourceId from tableSource)) 
THEN  
    SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'cannot delete in tableDestination because value exist in tableSource';
END IF;
END $$

DELIMITER ;


DELIMITER $$

CREATE TRIGGER triggerUpdate
  BEFORE UPDATE ON tableSource
  FOR EACH ROW
BEGIN 
  IF((old.sourceId <> new.sourceId) AND not (new.sourceId IN (SELECT destinationId from tableDestination))) 
THEN  
    SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'cannot update in tableSource because of missing value in tableDestination';
END IF;
END $$

DELIMITER ;

DELIMITER $$

CREATE TRIGGER triggerUpdate
  BEFORE UPDATE ON tableDestination
  FOR EACH ROW
BEGIN 
  IF((old.destinationId <> new.destinationId) AND (old.destinationId IN (SELECT sourceId from tableSource))) 
THEN  
    SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'cannot update in tableDestination because value exist in tableSource';
END IF;
END $$

DELIMITER ;